!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.nMap=t():e.nMap=t()}(window,(function(){return function(e){function t(t){for(var r,i,s=t[0],o=t[1],a=0,u=[];a<s.length;a++)i=s[a],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&u.push(n[i][0]),n[i]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);for(l&&l(t);u.length;)u.shift()()}var r={},n={0:0};function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(){return Promise.resolve()},i.m=e,i.c=r,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var s=window.webpackJsonpnMap=window.webpackJsonpnMap||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var a=0;a<s.length;a++)t(s[a]);var l=o;return i(i.s=1)}([function(e,t){function r(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function n(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}e.exports=function(e,t,i){var s=document.head||document.getElementsByTagName("head")[0],o=document.createElement("script");"function"==typeof t&&(i=t,t={}),t=t||{},i=i||function(){},o.type=t.type||"text/javascript",o.charset=t.charset||"utf8",o.async=!("async"in t)||!!t.async,o.src=e,t.attrs&&function(e,t){for(var r in t)e.setAttribute(r,t[r])}(o,t.attrs),t.text&&(o.text=""+t.text),("onload"in o?r:n)(o,i),o.onload||r(o,i),s.appendChild(o)}},function(e,t,r){"use strict";r.r(t),r.d(t,"NaverMap",(function(){return l})),r.d(t,"NaverMapMarker",(function(){return c})),r.d(t,"NaverMapMarkerCluster",(function(){return d})),r.d(t,"install",(function(){return f}));var n=function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{ref:"map",staticClass:"map",staticStyle:{width:"100%",height:"100%"}},[this.loading?this._e():this._t("default")],2)])};n._withStripped=!0;var i=r(0),s=r.n(i);function o(e,t,r,n,i,s,o,a){var l,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=r,u._compiled=!0),n&&(u.functional=!0),s&&(u._scopeId="data-v-"+s),o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=l):i&&(l=a?function(){i.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:i),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(e,t){return l.call(t),c(e,t)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,l):[l]}return{exports:e,options:u}}var a=o({provide(){const e={};return Object.defineProperty(e,"map",{get:()=>this.map}),Object.defineProperty(e,"naver",{get:()=>this.naver}),{core:e}},props:{naverKey:{type:String,default:""},center:{type:Object,default:()=>({})},zoom:{type:Number,default:10},libraries:{type:Array,default:()=>[]},options:{type:Object,default:()=>({})}},data:()=>({map:null,naver:null,loading:!0}),created(){this.loadMap()},methods:{loadMap(){"undefined"!=typeof window&&s()(`https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=${this.naverKey}&submodules=${this.libraries.join(",")}`,(e,t)=>{if(e)throw new Error(e);this.loading=!1;const r={center:new window.naver.maps.LatLng(37.3595704,127.105399),zoom:10,script:t,mapTypeControl:!1,mapTypeControlOptions:{style:window.naver.maps.MapTypeControlStyle.DROPDOWN}};this.naver=window.naver,window.map=this.map=new this.naver.maps.Map(this.$refs.map,r)})}}},n,[],!1,null,null,null);a.options.__file="src/vue-naver-map/components/Map.vue";var l=a.exports,u=o({inject:{core:{type:Object,required:!0},cluster:{type:[Object,Boolean],default:!1}},props:{position:{type:Object,required:!1,default:()=>({lat:37.3377362,lng:126.9941624})}},data:()=>({marker:null}),created(){this.createMarker()},beforeDestroy(){this.destroyMarker()},methods:{createMarker(){if(!this.core.map)throw new Error("Map loading is not finish.");this.cluster?this.insertCluster():this.marker=new this.core.naver.maps.Marker({position:new this.core.naver.maps.LatLng(this.position.lat,this.position.lng),map:this.core.map})},insertCluster(){this.marker=new this.core.naver.maps.Marker({position:new this.core.naver.maps.LatLng(this.position.lat,this.position.lng)}),this.cluster.clustering.markers.push(this.marker),this.core.map._debounceThing&&clearTimeout(this.core.map._debounceThing),this.core.map._debounceThing=setTimeout(this.redrawCluster,500)},redrawCluster(){this.cluster.clustering.setMap(this.cluster.clustering.getMap())},destroyMarker(){this.marker.setMap(null),this.marker=null}},render:()=>({})},void 0,void 0,!1,null,null,null);u.options.__file="src/vue-naver-map/components/Marker.vue";var c=u.exports,h=function(){var e=this.$createElement;return(this._self._c||e)("div",[this.loading?this._e():this._t("default")],2)};h._withStripped=!0;var p=o({provide(){const e={};return Object.defineProperty(e,"clustering",{enumerable:!0,get:()=>this.cluster}),{cluster:e}},inject:{core:{type:Object,required:!0}},props:{options:{type:Object,default:()=>({})}},data:()=>({cluster:null,loading:!0}),created(){this.createCluster()},beforeDestroy(){this.destroyCluster()},methods:{async createCluster(){if(!this.core.map)throw new Error("Map loading is not finish.");Promise.resolve().then(r.bind(null,2)).then(e=>{this.cluster=new e.default({map:this.core.map,markers:[],minClusterSize:this.getOption("minClusterSize",1),maxZoom:this.getOption("maxZoom",20),disableClickZoom:this.getOption("disableClickZoom"),gridSize:this.getOption("gridSize",120),icons:this.getOption("icons",this.getDefaultIcons()),indexGenerator:this.getOption("indexGenerator",[10,100,200,500,1e3]),stylingFunction:this.getOption("stylingFunction",this.getDefaultStylingFunction())}),this.loading=!1})},destroyCluster(){this.cluster.setMap(null),this.cluster=null},getOption(e,t=!1){return void 0===this.options[e]?t:this.options[e]},getDefaultStylingFunction:()=>function(e,t){e.getElement().getElementsByTagName("div")[0].innerText=t},getDefaultIcons(){return[{content:'<div style="cursor:pointer;width:40px;height:40px;line-height:42px;font-size:10px;color:black;text-align:center;font-weight:bold;background-color: #adffb3;border-radius:20px;"></div>',size:this.core.naver.maps.Size(40,40),anchor:this.core.naver.maps.Point(20,20)},{content:'<div style="cursor:pointer;width:40px;height:40px;line-height:42px;font-size:10px;color:black;text-align:center;font-weight:bold;background-color: #75ff7f;border-radius:20px;"></div>',size:this.core.naver.maps.Size(40,40),anchor:this.core.naver.maps.Point(20,20)},{content:'<div style="cursor:pointer;width:40px;height:40px;line-height:42px;font-size:10px;color:black;text-align:center;font-weight:bold;background-color: #1dff2d;border-radius:20px;"></div>',size:this.core.naver.maps.Size(40,40),anchor:this.core.naver.maps.Point(20,20)},{content:'<div style="cursor:pointer;width:40px;height:40px;line-height:42px;font-size:10px;color:black;text-align:center;font-weight:bold;background-color: #e7ff1d;border-radius:20px;"></div>',size:this.core.naver.maps.Size(40,40),anchor:this.core.naver.maps.Point(20,20)},{content:'<div style="cursor:pointer;width:40px;height:40px;line-height:42px;font-size:10px;color:black;text-align:center;font-weight:bold;background-color: #ffa51d;border-radius:20px;"></div>',size:this.core.naver.maps.Size(40,40),anchor:this.core.naver.maps.Point(20,20)}]}}},h,[],!1,null,null,null);p.options.__file="src/vue-naver-map/components/Cluster.vue";var d=p.exports;function f(e,t={}){(t={installComponents:!0,autobindAllEvents:!1,...t}).installComponents&&(e.component("NaverMap",l),e.component("NaverMapMarker",c),e.component("NaverMapMarkerCluster",d))}t.default={install:f}},function(e,t,r){"use strict";r.r(t);var n=function(e){this.DEFAULT_OPTIONS={map:null,markers:[],disableClickZoom:!0,minClusterSize:2,maxZoom:13,gridSize:100,icons:[],indexGenerator:[10,100,200,500,1e3],averageCenter:!1,stylingFunction:function(){}},this._clusters=[],this._mapRelations=null,this._markerRelations=[],this.setOptions(naver.maps.Util.extend({},this.DEFAULT_OPTIONS,e),!0),this.setMap(e.map||null)};naver.maps.Util.ClassExtend(n,naver.maps.OverlayView,{onAdd:function(){var e=this.getMap();this._mapRelations=naver.maps.Event.addListener(e,"idle",naver.maps.Util.bind(this._onIdle,this)),this.getMarkers().length>0&&(this._createClusters(),this._updateClusters())},draw:naver.maps.Util.noop,onRemove:function(){naver.maps.Event.removeListener(this._mapRelation),this._clearClusters(),this._geoTree=null,this._mapRelation=null},setOptions:function(e){var t=this;if("string"==typeof e){var r=e,n=arguments[1];t.set(r,n)}else{var i=arguments[1];naver.maps.Util.forEach(e,(function(e,r){"map"!==r&&t.set(r,e)})),e.map&&!i&&t.setMap(e.map)}},getOptions:function(e){var t=this,r={};return void 0!==e?t.get(e):(naver.maps.Util.forEach(t.DEFAULT_OPTIONS,(function(e,n){r[n]=t.get(n)})),r)},getMinClusterSize:function(){return this.getOptions("minClusterSize")},setMinClusterSize:function(e){this.setOptions("minClusterSize",e)},getMaxZoom:function(){return this.getOptions("maxZoom")},setMaxZoom:function(e){this.setOptions("maxZoom",e)},getGridSize:function(){return this.getOptions("gridSize")},setGridSize:function(e){this.setOptions("gridSize",e)},getIndexGenerator:function(){return this.getOptions("indexGenerator")},setIndexGenerator:function(e){this.setOptions("indexGenerator",e)},getMarkers:function(){return this.getOptions("markers")},setMarkers:function(e){this.setOptions("markers",e)},getIcons:function(){return this.getOptions("icons")},setIcons:function(e){this.setOptions("icons",e)},getStylingFunction:function(){return this.getOptions("stylingFunction")},setStylingFunction:function(e){this.setOptions("stylingFunction",e)},getDisableClickZoom:function(){return this.getOptions("disableClickZoom")},setDisableClickZoom:function(e){this.setOptions("disableClickZoom",e)},getAverageCenter:function(){return this.getOptions("averageCenter")},setAverageCenter:function(e){this.setOptions("averageCenter",e)},changed:function(e,t){if(this.getMap())switch(e){case"marker":case"minClusterSize":case"gridSize":case"averageCenter":this._redraw();break;case"indexGenerator":case"icons":this._clusters.forEach((function(e){e.updateIcon()}));break;case"maxZoom":this._clusters.forEach((function(e){e.getCount()>1&&e.checkByZoomAndMinClusterSize()}));break;case"stylingFunction":this._clusters.forEach((function(e){e.updateCount()}));break;case"disableClickZoom":var r="enableClickZoom";t&&(r="disableClickZoom"),this._clusters.forEach((function(e){e[r]()}))}},_createClusters:function(){var e=this.getMap();if(e)for(var t=e.getBounds(),r=this.getMarkers(),n=0,i=r.length;n<i;n++){var s=r[n],o=s.getPosition();if(t.hasLatLng(o))this._getClosestCluster(o).addMarker(s),this._markerRelations.push(naver.maps.Event.addListener(s,"dragend",naver.maps.Util.bind(this._onDragEnd,this)))}},_updateClusters:function(){for(var e=this._clusters,t=0,r=e.length;t<r;t++)e[t].updateCluster()},_clearClusters:function(){for(var e=this._clusters,t=0,r=e.length;t<r;t++)e[t].destroy();naver.maps.Event.removeListener(this._markerRelations),this._markerRelations=[],this._clusters=[]},_redraw:function(){this._clearClusters(),this._createClusters(),this._updateClusters()},_getClosestCluster:function(e){for(var t=this.getProjection(),r=this._clusters,n=null,s=1/0,o=0,a=r.length;o<a;o++){var l=r[o],u=l.getCenter();if(l.isInBounds(e)){var c=t.getDistance(u,e);c<s&&(s=c,n=l)}}return n||(n=new i(this),this._clusters.push(n)),n},_onIdle:function(){this._redraw()},_onDragEnd:function(){this._redraw()}});var i=function(e){this._clusterCenter=null,this._clusterBounds=null,this._clusterMarker=null,this._relation=null,this._clusterMember=[],this._markerClusterer=e};i.prototype={constructor:i,addMarker:function(e){if(!this._isMember(e)){if(!this._clusterCenter){var t=e.getPosition();this._clusterCenter=t,this._clusterBounds=this._calcBounds(t)}this._clusterMember.push(e)}},destroy:function(){naver.maps.Event.removeListener(this._relation);for(var e=this._clusterMember,t=0,r=e.length;t<r;t++)e[t].setMap(null);this._clusterMarker.setMap(null),this._clusterMarker=null,this._clusterCenter=null,this._clusterBounds=null,this._relation=null,this._clusterMember=[]},getCenter:function(){return this._clusterCenter},getBounds:function(){return this._clusterBounds},getCount:function(){return this._clusterMember.length},getClusterMember:function(){return this._clusterMember},isInBounds:function(e){return this._clusterBounds&&this._clusterBounds.hasLatLng(e)},enableClickZoom:function(){if(!this._relation){var e=this._markerClusterer.getMap();this._relation=naver.maps.Event.addListener(this._clusterMarker,"click",naver.maps.Util.bind((function(t){e.morph(t.coord,e.getZoom()+1)}),this))}},disableClickZoom:function(){this._relation&&(naver.maps.Event.removeListener(this._relation),this._relation=null)},updateCluster:function(){var e;this._clusterMarker||(e=this._markerClusterer.getAverageCenter()?this._calcAverageCenter(this._clusterMember):this._clusterCenter,this._clusterMarker=new naver.maps.Marker({position:e,map:this._markerClusterer.getMap()}),this._markerClusterer.getDisableClickZoom()||this.enableClickZoom());this.updateIcon(),this.updateCount(),this.checkByZoomAndMinClusterSize()},checkByZoomAndMinClusterSize:function(){var e=this._markerClusterer,t=e.getMinClusterSize(),r=e.getMaxZoom(),n=e.getMap().getZoom();this.getCount()<t?this._showMember():(this._hideMember(),r<=n&&this._showMember())},updateCount:function(){var e=this._markerClusterer.getStylingFunction();e&&e(this._clusterMarker,this.getCount())},updateIcon:function(){var e=this.getCount(),t=this._getIndex(e),r=this._markerClusterer.getIcons();t=Math.max(t,0),t=Math.min(t,r.length-1),this._clusterMarker.setIcon(r[t])},_showMember:function(){for(var e=this._markerClusterer.getMap(),t=this._clusterMarker,r=this._clusterMember,n=0,i=r.length;n<i;n++)r[n].setMap(e);t&&t.setMap(null)},_hideMember:function(){for(var e=this._markerClusterer.getMap(),t=this._clusterMarker,r=this._clusterMember,n=0,i=r.length;n<i;n++)r[n].setMap(null);t&&!t.getMap()&&t.setMap(e)},_calcBounds:function(e){var t=this._markerClusterer.getMap(),r=new naver.maps.LatLngBounds(e.clone(),e.clone()),n=t.getBounds(),i=t.getProjection(),s=i.fromCoordToOffset(n.getNE()),o=i.fromCoordToOffset(n.getSW()),a=i.fromCoordToOffset(r.getNE()),l=i.fromCoordToOffset(r.getSW()),u=this._markerClusterer.getGridSize()/2;a.add(u,-u),l.add(-u,u);var c=Math.min(s.x,a.x),h=Math.max(s.y,a.y),p=Math.max(o.x,l.x),d=Math.min(o.y,l.y),f=i.fromOffsetToCoord(new naver.maps.Point(c,h)),m=i.fromOffsetToCoord(new naver.maps.Point(p,d));return new naver.maps.LatLngBounds(m,f)},_getIndex:function(e){var t=this._markerClusterer.getIndexGenerator();if(naver.maps.Util.isFunction(t))return t(e);if(naver.maps.Util.isArray(t)){for(var r=0,n=r,i=t.length;n<i;n++){if(e<t[n])break;r++}return r}},_isMember:function(e){return-1!==this._clusterMember.indexOf(e)},_calcAverageCenter:function(e){for(var t=e.length,r=[0,0],n=0;n<t;n++)r[0]+=e[n].position.x,r[1]+=e[n].position.y;return r[0]/=t,r[1]/=t,new naver.maps.Point(r[0],r[1])}},t.default=n}])}));